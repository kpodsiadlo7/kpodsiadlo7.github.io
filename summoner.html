<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Summoner Info</title>
</head>
<body class="body">
    <div class="container summonerContainer">
        <div class="toprectangle">
            <form class="row g-3 searchSummoner" onsubmit="searchSummoner(event)">
                <div class="col-auto">
                    <input type="text" class="form-control" id="name" name="name" placeholder="Nazwa gracza">
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary">Wyszukaj</button>
                </div>
            </form>          
        </div>
        <main>
            <div class="summonerMidContainer">
                <div id="midContainerTop">
                    <div id="topLeft"><img id="summonerIcon" src="" alt="Summoner Icon"></div>
                    <div id="topRight">
                        <div>
                            <div id="upperInfo">
                                <div id="rank">Ranga</div>
                                <div id="summonerName">Nazwa gracza</div>
                                <div id="upperLv">lvl</div>
                            </div>      
                        </div>
                        <div id="bottom">
                            <div id="main1">
                                <div id="numberMain1">1.</div>
                                <div id="iconMain1"><img id="champIcon1" src="" alt="ChampIcon"></div>
                                <div id="">
                                    <div id="nameMain1">ChampName</div>
                                    <div id="champLv1">lvl</div>
                                </div>                                                              
                            </div>
                            <div id="main2">
                                <div id="numberMain2">2.</div>
                                <div id="iconMain2"><img id="champIcon2" src="" alt="ChampIcon"></div>
                                <div id="">
                                    <div id="nameMain2">ChampName</div>
                                    <div class="champLv" id="champLv2">lvl</div>
                                </div>  
                            </div>
                            <div id="main3">
                                <div id="numberMain3">3.</div>
                                <div id="iconMain3"><img id="champIcon3" src="" alt="ChampIcon"></div>
                                <div id="">
                                    <div id="nameMain2">ChampName</div>
                                    <div class="champLv" id="champLv3">lvl</div>
                                </div>  
                            </div>
                        </div>
                    </div>
                </div>
                <div id="midContainerCenter">
                    <div id="title">
                        <h3>Ostatnie 3 rankedy</h3>
                    </div>
                    <div id="middleContainer">
                        <div id="leftMiddleContainer">
                            <div class="titleLeftMiddle">
                                <div id="champIconMiddle1"><img id="champImg1" src="" alt="Champ Icon"></div>
                                <div id="champNameMiddle1">Champ Name</div>
                            </div> 
                            <div class="matchInfo">Info</div>
                        </div>
                        <div id="middleMiddleContainer">
                            <div class="titleLeftMiddle">
                                <div id="champIconMiddle2"><img id="champImg2" src="" alt="Champ Icon"></div>
                                <div id="champNameMiddle2">Champ Name</div>
                            </div> 
                            <div class="matchInfo">Info</div>
                        </div>
                        <div id="rightMiddleContainer">
                            <div class="titleLeftMiddle">
                                <div id="champIconMiddle3"><img id="champImg3" src="" alt="Champ Icon"></div>
                                <div id="champNameMiddle3">Champ Name</div>
                            </div> 
                            <div class="matchInfo">Info</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script>
        async function searchSummoner(event) {
            event.preventDefault();
    
            const name = document.getElementById('name').value;
            const apiUrl = `http://localhost:8080/?summonerName=${encodeURIComponent(name)}`;
    
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                const summonerIcon = document.getElementById('summonerIcon');
                summonerIcon.src = data.iconUrl;
                
                const summonerName = document.getElementById('summonerName');
                summonerName.textContent = data.name;

                const summonerRank = document.getElementById('rank');
                summonerRank.textContent = data.rank;
                summonerRank.style.color = data.rankColor;

                const sumonnerLv = document.getElementById('upperLv');
                sumonnerLv.textContent = data.summonerLevel;

                //CHAMP ICONS
                const champIcon1 = document.getElementById('champIcon1');
                champIcon1.src = `img/champions/${data.champName1}.jpeg`;

                const champIcon2 = document.getElementById('champIcon2');
                champIcon2.src = `img/champions/${data.champName2}.jpeg`;

                const champIcon3 = document.getElementById('champIcon3');
                champIcon3.src = `img/champions/${data.champName3}.jpeg`;

                //CHAMP NAMES
                const nameMain1 = document.getElementById('nameMain1');
                nameMain1.textContent = data.champName1;

                const nameMain2 = document.getElementById('nameMain2');
                nameMain2.textContent = data.champName2;

                const nameMain3 = document.getElementById('nameMain3');
                nameMain3.textContent = data.champName3;

                

                //LAST 3 MATCHES
                //CHAMP ICONS
                const champImg1 = document.getElementById('champImg1');
                champImg1.src = `img/champions/${data.matchChampName1}.jpeg`;

                const champImg2 = document.getElementById('champImg2');
                champImg2.src = `img/champions/${data.matchChampName2}.jpeg`;

                const champImg3 = document.getElementById('champImg3');
                champImg3.src = `img/champions/${data.matchChampName3}.jpeg`;
                
                //CHAMP NAMES
                const champNameMiddle1 = document.getElementById('champNameMiddle1');
                champNameMiddle1.textContent = data.matchChampName1;

                const champNameMiddle2 = document.getElementById('champNameMiddle2');
                champNameMiddle2.textContent = data.matchChampName2;

                const champNameMiddle3 = document.getElementById('champNameMiddle3');
                champNameMiddle3.textContent = data.matchChampName3;

            } catch (error) {
                console.error('Błąd podczas przetwarzania odpowiedzi JSON:', error);
            }
        }
    </script>
</body>
</html>